La presente sección recoge una serie de ejemplos prácticos y flujos de trabajo habituales en PowerPad, con el propósito de demostrar de manera práctica las funcionalidades implementadas y su aplicabilidad en escenarios reales. 
Cada caso de uso se describe de forma estructurada, detallando los pasos que debe seguir el usuario, los elementos visuales involucrados y la trazabilidad de las acciones a nivel de código. Además, se incluyen capturas de pantalla y las anotaciones técnicas más relevantes para cada caso.

## 12.1. Instalación de Ollama

#### Caso de uso
El usuario quiere instalar y utilizar Ollama, y por eso recurre a PowerPad que, además se servirle de interfaz gráfica para el uso de inteligencia artificial en local, también le facilita el acceso a la descarga, instalación y verificación del servicio de Ollama.

#### Pasos para el usuario

1. Usuario: Abre la aplicación PowerPad (sin haber instalado previamente Ollama).
	a. PowerPad: Aparece diálogo de descarga de Ollama.
2. Usuario: Pulsa el botón `Descargar Ollama`.
	b. PowerPad: Se inicia descarga de Ollama.
	c. PowerPad: Muestra progreso de descarga.
	d. PowerPad: Al finalizar la descarga, se inicia el instalador.
	e. PowerPad: El diálogo muestra botón de confirmación de la instalación.
3. Usuario: Finaliza el instalador independiente.
4. Usuario: Pulsa el botón `Instalación finalizada`.
	f. PowerPad: Comprueba si el servicio de Ollama responde.
	g. PowerPad: El diálogo muestra botón para acceder a la instalación de modelos.
5. Usuario: Pulsa el botón `Ir a modelos`.

#### Interfaces implicados
    (pte)

#### Clases implicadas

- `App`: Clase principal de la aplicación.
- `MainWindow`: Ventana principal.
- `SettingsViewModel`: Comprueba y guarda los estados de conexión.
- `OllamaService`: Comprueba el estado del servicio de Ollama.
- `OllamaDownloadHelper`: Gestiona el diálogo y proceso de descarga/instalación.

#### Secuencia simplificada

**Parte 1**
```mermaid
sequenceDiagram
    actor U as Usuario
    participant A as App
    participant M as MainWindow
    participant S as SettingsViewModel
    participant OS as OllamaService
    participant OD as OllamaDownloadHelper
        
    U->>A: Inicia aplicación
    activate A
    A->>M: Crea instancia
    activate M
    M->>S: Comprueba conexiones
    activate S
    S->>OS: Prueba conexión Ollama
    activate OS
    OS->>OS: Comprueba conectividad Ollama
    OS-->>S: Estado conexión Ollama
    deactivate OS
    S-->>M: Estado conexión Ollama
    deactivate S
    alt Ollama habilitado y no instalado
        M->>OD: Invoca el diálogo
        activate OD
        OD-->>U: Muestra diálogo de descarga
        U->>OD: Clic en "Descargar Ollama"
        activate OD
        OD->>OD: Descarga
    end
    deactivate OD
    deactivate OD
    deactivate M
    deactivate A
```

- Usuario inicia `App`
- `App` crea instancia de `MainWindow`
- `MainWindow` comprueba el estado de las conexiones en `SettingsViewModel`
- `SettingsViewModel` prueba la conexión de Ollama con `OllamaService`
- `OllamaService` comprueba la conectividad de Ollama
- *Si Ollama está habilitado y no está instalado*: `MainWindow` invoca el diálogo de instalación a `OllamaDownloadHelper`
- `OllamaDownloadHelper` muestra al usuario el diálogo de descarga de Ollama
- *Si usuario hace clic en* `Descargar Ollama`: `OllamaDownloadHelper` inicia la descarga

**Parte 2**
```mermaid
sequenceDiagram
    actor U as Usuario
    participant OD as OllamaDownloadHelper
    participant S as SettingsViewModel
    participant OS as OllamaService
    actor SO as Ollama
    
    activate OD
    activate OD
    OD->>SO: Arranca instalación Ollama
    OD-->>U: Muestra "Instalación finalizada"
    deactivate OD
    U->>OD: Clic en "Instalación finalizada"
    activate OD
    OD->>S: Comprueba conexiones
    activate S
    S->>OS: Prueba conexión Ollama
    activate OS
    OS->>SO: Comprueba conectividad Ollama
    activate SO
    SO-->>OS: Ollama conectado
    deactivate SO
    OS-->>S: Estado conexión Ollama  
    deactivate OS
    S-->>OD: Estado conexión Ollama
    deactivate S
    alt Ollama en ejecución
        OD-->>U: Muestra "Ir a modelos"
        deactivate OD
        U->>OD: Clic en "Ir a modelos"
        activate OD
        OD-->>U: Se cierra y devuelve control
    end
    deactivate OD
    deactivate OD
```

- *Cuando la descarga ha finalizado*: `OllamaDownloadHelper` arranca el instalador de Ollama y muestra botón `Instalación finalizada`
- *Si usuario completa instalación y hace clic en* `Instalación finalizada`: `OllamaDownloadHelper` comprueba el estado del servicio en `SettingsViewModel`
- `SettingsViewModel` prueba la conexión de Ollama con `OllamaService`
- `OllamaService` comprueba la conectividad de Ollama
- *Si Ollama está en ejecución*: `OllamaDownloadHelper` muestra botón `Ir a modelos`
- *Si usuario hace clic en* `Ir a modelos`: `OllamaDownloadHelper` se cierra y devuelve el control a `MainWindow`

## 12.2. Añadir modelo de IA a Ollama

#### Caso de uso
El usuario quiere añadir un modelo a Ollama para poder utilizarlo a través de Powerpad para sus conversaciones y edición de texto asistido por inteligencia artificial de forma local.

#### Pasos para el usuario

1. Usuario: Abre la aplicación PowerPad.
	a. PowerPad: Muestra la ventana principal.
2. Usuario: Pulsa sobre `Modelos`.
	b. PowerPad: Muestra la página de modelos disponibles de Ollama.
3. Usuario: Pulsa sobre `Añadir modelos`.
	c. PowerPad: Muestra la página de añadir modelos de Ollama.
4. Usuario: Escribe el nombre del modelo buscado.
	d. PowerPad: Muestra los resultados de la búsqueda.
5. Usuario: Pulsa sobre el botón de descarga en el modelo deseado.
	e. PowerPad: Inicia la descarga.
	f. PowerPad: Muestra el progreso de la descarga.
	g. PowerPad: Muestra el modelo como añadido.
6. Usuario: Pulsa sobre `Workspace` para salir de `Modelos`.

#### Interfaces implicados
(ESPACIO PARA CAPTURAS)

#### Clases implicadas

- `App`: Clase principal de la aplicación.
- `MainWindow`: Ventana principal.
- `ModelsPage`: Página que muestra las opciones de gestión de modelos.
- `OllamaAddModelPage`: Página para buscar y añadir nuevos modelos de Ollama.
- `OllamaModelsViewModel`: Gestiona la lógica de modelos de Ollama y el estado de los mismos.
- `OllamaService`: Gestiona la comunicación con servicio de Ollama.
- `OllamaLibraryHelper`: Realiza operaciones de búsqueda sobre la biblioteca de modelos de Ollama.
- `ModelsSettingsViewModel`: Gestiona la configuración y el estado de los modelos.

#### Secuencia simplificada

**Parte 1**
```mermaid
sequenceDiagram
    actor U as Usuario
    participant A as App
    participant M as MainWindow
    participant MP as ModelsPage
    participant OAMP as OllamaAddModelPage

    U->>A: Inicia aplicación
    activate A
    A->>M: Crea instancia
    activate M
    M-->>U: Control
    U->>M: Clic en Modelos
    activate M
    M->>MP: Carga ModelsPage
    activate MP
    MP-->>U: Control
    U->>MP: Clic en Añadir modelos
    activate MP
    MP->>OAMP: Carga OllamaAddModelPage
    activate OAMP
    OAMP-->>U: Control
    deactivate OAMP
    deactivate MP
    deactivate MP
    deactivate M
    deactivate M
    deactivate A
```

- Usuario inicia `App`
- `App` crea instancia de `MainWindow`
- Usuario hace clic en `Modelos` en `MainWindow`
- `MainWindow` carga `ModelsPage`
- `ModelsPage` muestra opciones para gestión de modelos
- Usuario hace clic en `Añadir modelos` en `ModelsPage`
- `ModelsPage` carga `OllamaAddModelPage`

**Parte 2**

```mermaid
sequenceDiagram
    actor U as Usuario
    participant OAMP as OllamaAddModelPage
    participant OMVM as OllamaModelsViewModel
    participant OS as OllamaService
    participant OLH as OllamaLibraryHelper
    actor WO as Web Ollama

    activate OAMP
    U->>OAMP: Realiza búsqueda
    activate OAMP
    OAMP->>OMVM: Ejecuta comando de búsqueda
    activate OMVM
    OMVM->>OS: Buscar
    activate OS
    OS->>OLH: Búsqueda web
    activate OLH
    OLH->>WO: Petición web
    activate WO
    WO-->>OLH: Resultado web
    deactivate WO
    OLH-->>OS: Modelos
    deactivate OLH
    OS-->>OMVM: Modelos
    deactivate OS
    OMVM-->>OAMP: Notifica estado de la búsqueda
    deactivate OMVM
    alt Hay resultados de búsqueda
        OAMP-->>U: Representa los resultados
        deactivate OAMP
    end
    deactivate OAMP
```

- Usuario realiza búsqueda en `OllamaAddModelPage`
- `OllamaAddModelPage` ejecuta comando de búsqueda en `OllamaModelsViewModel`
- `OllamaModelsViewModel` solicita búsqueda en `OllamaService`
- `OllamaService` realiza búsqueda a través de `OllamaLibraryHelper`
- `OllamaLibraryHelper` traslada la búsqueda a la web de Ollama.com y recibe los resultados
- `OllamaLibraryHelper` devuelve resultados a `OllamaService`
- `OllamaService` devuelve resultados a `OllamaModelsViewModel`
- `OllamaModelsViewModel` notifica cambios en estado de la búsqueda a `OllamaAddModelPage`
- *Si hay resultados de búsqueda*: `OllamaAddModelPage` representa los resultados

**Parte 3**
```mermaid
sequenceDiagram
    actor U as Usuario
    participant OAMP as OllamaAddModelPage
    participant OMVM as OllamaModelsViewModel
    participant OS as OllamaService
    participant MSVM as ModelsSettingsViewModel
    actor OLL as Servicio Ollama

        activate OAMP
        U->>OAMP: Clic en Descargar
        activate OAMP
        OAMP->>OMVM: Ejecuta añadir modelo
        activate OMVM
        OMVM-->>MSVM: Añade el modelo
        OMVM->>OS: Solicita descarga
        activate OS
        deactivate OMVM
        OS->>OLL: Solicita descarga
        activate OLL
        deactivate OS
        OLL-->>MSVM: Progreso de descarga

        alt Descarga finalizada
            OLL-->>MSVM: Descarga finalizada
            deactivate OLL
            MSVM-->>OAMP: Notifica estado del modelo
            OAMP-->>U: Representa modelo añadido
            deactivate OAMP
        end
        deactivate OAMP
```

- *Si el usuario hace clic en* `Descargar`: `OllamaAddModelPage` ejecuta comando de añadir modelo en `OllamaModelsViewModel`
- `OllamaModelsViewModel` añade el modelo a `ModelsSettingsViewModel`
- `OllamaModelsViewModel` solicita descarga en `OllamaService`
- `OllamaService` solicita a `Ollama` la descarga del modelo
- `OllamaService` notifica actualizaciones de la descarga al modelo en `ModelsSettingsViewModel`
- *Cuando la descarga ha finalizado*: `ModelsSettingsViewModel` notifica cambios en estado del modelo a `OllamaAddModelPage`
- `OllamaAddModelPage` representa el modelo como añadido
- *Si usuario hace clic en* `Workspace`: `MainWindow` carga `WorkspacePage`

## 12.3. Creación de un agente

#### Caso de uso
El usuario desea crear un agente de inteligencia artificial personalizado para responder correos electrónicos con estilo formal a partir de unas indicaciones, utilizando un modelo de IA generativa previamente configurado.

#### Pasos para el usuario

1. Usuario: Abre la aplicación PowerPad.
	a. PowerPad: Muestra la ventana principal.
2. Usuario: Pulsa sobre `Agentes`.
	b. PowerPad: Muestra la página de agentes.
3. Usuario: Pulsa sobre `Añadir agente`.
	c. PowerPad: Muestra la página de añadir agentes.
4. Usuario: Elige un icono para el agente.
5. Usuario: Escribe el nombre del agente.
6. Usuario: Escribe la descripción del agente.
7. Usuario: Escribe elige el modelo del agente.
8. Usuario: Pulsa el botón `Guardar`.
	d. PowerPad: Muestra el nuevo agente guardado.
9. Usuario: Pulsa sobre `Workspace` para salir de `Agentes`.

#### Interfaces implicados
(ESPACIO PARA CAPTURAS)

#### Clases implicadas

- `App`: Clase principal de la aplicación.
- `MainWindow`: Ventana principal.
- `AgentsPage`: Página que muestra las opciones de gestión de agentes.
- `AgentEditor`: Componente para editar agentes.
- `AgentsCollectionViewModel`: Gestiona la lógica de agentes y la persistencia de los mismos.
- `ModelsSettingsViewModel`: Gestiona la configuración y el estado de los modelos.

#### Secuencia simplificada

**Parte 1**
```mermaid
sequenceDiagram
    actor U as Usuario
    participant A as App
    participant M as MainWindow
    participant AP as AgentsPage
    participant ACVM as AgentsCollectionViewModel
    participant AE as AgentEditor

    U->>A: Inicia aplicación
    activate A
    A->>M: Crea instancia
    activate M
    M-->>U: Control
    U->>M: Clic en Agentes
    activate M
    M->>AP: Carga AgentsPage
    activate AP
    M-->>U: Control
    U->>AP: Clic en Añadir agente
    activate AP
    AP-->>ACVM: Añade nuevo AgentViewModel
    AP->>AE: Carga componente AgentEditor
    activate AE
    AE-->>U: Control
    deactivate AE

    deactivate A
    deactivate M
    deactivate M
    deactivate AP
    deactivate AP
```

- Usuario inicia `App`
- `App` crea instancia de `MainWindow`
- Usuario hace clic en `Agentes` en `MainWindow`
- `MainWindow` carga `AgentsPage`
- `AgentsPage` muestra opciones para gestión de agentes
- Usuario hace clic en `Añadir agente` en `AgentsPage`
- `AgentsPage` añade un nuevo `AgentViewModel` en `AgentsCollectionViewModel`
- `AgentsPage` carga el componente `AgentEditor`

**Parte 2**
```mermaid
sequenceDiagram
    actor U as Usuario
    participant AE as AgentEditor
    participant MSVM as ModelsSettingsViewModel
    participant AVM as AgentViewModel
    participant ACVM as AgentsCollectionViewModel
    participant AP as AgentsPage

    activate AP
    activate AE

	AE->>MSVM: Solicita modelos
	activate MSVM
	MSVM-->>AE: Modelos
	deactivate MSVM
    U->>AE: Selecciona un icono
    U->>AE: Escribe el nombre del agente
    U->>AE: Escribe la descripción del agente
    U->>AE: Elige el modelo del agente

    alt Usuario hace clic en Guardar
        U->>AE: Clic en Guardar
        activate AE
        AE-->>AVM: Actualiza modelo
        deactivate AE
        AVM-->>ACVM: Notifica cambios
        ACVM-->>AP: Notifica cambios
        AP-->>U: Muestra agente actualizado
            deactivate AP
    deactivate AE
    end
```

- `AgentEditor` carga los datos del `AgentViewModel` creado
- `AgentEditor` carga los modelos desde `ModelsSettingsViewModel`
- Usuario selecciona un icono en `AgentEditor`
- Usuario escribe el nombre del agente en `AgentEditor`
- Usuario escribe la descripción del agente en `AgentEditor`
- Usuario elige un modelo para el agente en `AgentEditor`
- *Si el usuario hace clic en* `Guardar`: `AgentEditor` actualiza `AgentViewModel`
- `AgentViewModel` notifica cambios en estado del modelo a `AgentsCollectionViewModel`
- `AgentsCollectionViewModel` notifica cambios en estado del modelo a `AgentsPage`
- `AgentsPage` actualiza la lista y muestra el nuevo agente actualizado
- *Si usuario hace clic en* `Workspace`: `MainWindow` carga `WorkspacePage`

## 12.4. Conversación con un agente

#### Caso de uso
El usuario desea mantener una conversación con un agente de inteligencia artificial previamente creado, utilizando un modelo de IA generativa. El objetivo es obtener respuestas personalizadas y contextualizadas según la configuración del agente (por ejemplo, un agente especializado en redacción formal de correos).

#### Pasos para el usuario

1. Usuario: Abre la aplicación PowerPad.  
	a. PowerPad: Muestra la ventana principal.  
	b. PowerPad: Muestra la página de espacio de trabajo.
2. Usuario: Pulsa sobre `Nuevo chat`.
	c. PowerPad: Muestra el componente de conversaciones.  
3. Usuario: Pulsa sobre el selector de agentes y elige el agente deseado.  
4. Usuario: Escribe un mensaje en el área de entrada de chat.  
5. Usuario: Pulsa el botón `Enviar` o presiona `Intro`.  
	d. PowerPad muestra el mensaje del usuario en el chat.
	e. PowerPad envía el mensaje, junto al historial de la conversación y el prompt del agente, al servicio de IA correspondiente al modelo del agente.
	f. PowerPad muestra un indicador de respuesta.  
	g. PowerPad muestra la respuesta generada por la IA a medida que la va recibiendo del servicio de IA.
6. Usuario: Pulsa el botón `Copiar` en el mensaje recibido
	h. PowerPad guarda en el portapapeles el contenido del menaje recibido.

#### Interfaces implicados
(ESPACIO PARA CAPTURAS)  

#### Clases implicadas

- `App`: Clase principal de la aplicación.
- `MainWindow`: Ventana principal.
- `WorkspacePage`: Página de gestión de documentos y chats.
- `WorkspaceViewModel`: Lógica de presentación y gestión del espacio de trabajo.
- `ChatEditorControl`: Control de edición y visualización de chats.
- `ChatViewModel`: Lógica de presentación y gestión del estado del chat.
- `ChatControl`: Control para interactuar con la conversación.
- `AgentsCollectionViewModel`: Gestión de agentes.
- `IChatService`: Interfaz para la comunicación con los servicios de IA.

#### Secuencia simplificada

completar



## 12.5. Edición de una nota con IA

#### Caso de uso
El usuario desea tomar notas durante una llamada donde le van a dar detalles de un nuevo proyecto, posteriormente quiere solicitar a la IA que corrija y ordene el texto para que puede guardarlo y consultar con su contenido en otro momento.

#### Pasos para el usuario

1. Usuario: Abre la aplicación PowerPad.  
	a. PowerPad: Muestra la ventana principal.  
	b. PowerPad: Muestra la página de espacio de trabajo.
2. Usuario: Pulsa sobre `Nueva nota`.
	c. PowerPad: Muestra el componente de editor de texto.  
3. Usuario: Escribe sus notas sin prestar atención a la corrección y al formato.  
4. Usuario: Pulsa sobre el selector de agentes y elige el agente `PowerEditor`.  
5. Usuario: Escribe la acción `Corregir y ordenar`
6. Usuario: Pulsa el botón `Enviar` o presiona `Intro`.  
	d. PowerPad envía la nota, junto a la acción y el prompt del agente `PowerEditor`, al servicio de IA predeterminado.
	e. PowerPad muestra un indicador de respuesta.  
	f. PowerPad recibe la respuesta generada por la IA con las notas modificadas.  
	g. PowerPad actualiza la nota.
7. Usuario: Pulsa el botón `Guardar` en el editor de texto
	h. PowerPad guarda la nota en el documento del espacio de trabajo.

#### Interfaces implicados
(ESPACIO PARA CAPTURAS)  

#### Clases implicadas

- `App`: Clase principal de la aplicación.
- `MainWindow`: Ventana principal.
- `WorkspacePage`: Página de gestión de documentos y chats.
- `WorkspaceViewModel`: Lógica de presentación y gestión del espacio de trabajo.
- `TextEditorControl`: Control de edición de texto.
- `DocumentViewModel`: Lógica de presentación y gestión de documentos.
- `NoteAgentControl`: Control para interactuar con la nota a través de los agentes.
- `AgentsCollectionViewModel`: Gestión de agentes.
- `IChatService`: Interfaz para la comunicación con los servicios de IA.

#### Secuencia simplificada

(ESPACIO PARA SECUENCIAS)


## 12.6. Edición rápida desde aplicación externa

#### Caso de uso
El usuario está trabajando en su correo electrónico y necesita editar rápidamente un fragmento de texto utilizando las capacidades de edición con IA de PowerPad, sin necesidad de cambiar completamente de contexto o abrir la aplicación principal.

#### Pasos para el usuario

1. Usuario: Selecciona un texto en una aplicación externa (por ejemplo, un email, documento o página web).
2. Usuario: Utiliza el atajo de teclado global configurado en PowerPad (por ejemplo, `Ctrl+Shift+E`) para invocar la edición rápida.  
    a. PowerPad: Detecta el atajo global y muestra la ventana emergente de edición rápida (`PopupWindow`), incluso si la ventana principal está minimizada o en segundo plano.  
    b. PowerPad: Si es posible, recupera el texto seleccionado desde el portapapeles o mediante simulación de teclas (dependiendo de la integración y permisos del sistema).
3. Usuario: Edita el texto en el editor enriquecido de la ventana emergente.
4. (Opcional) Usuario: Utiliza las funciones de IA disponibles (por ejemplo, seleccionar un agente y pedirle que corrija, resuma o mejore el texto).  
    c. PowerPad: Envía el texto al agente seleccionado y muestra la respuesta generada.  
    d. PowerPad: Actualiza el editor con la sugerencia de la IA.
5. Usuario: Una vez terminado, pulsa el botón `Copiar` o utiliza el atajo correspondiente.  
    e. PowerPad: Copia el texto editado al portapapeles.
6. Usuario: Vuelve a la aplicación original y pega el texto editado.

#### Interfaces implicados

(ESPACIO PARA CAPTURAS)  

#### Clases implicadas

- `App`: Clase principal de la aplicación.
- `PopupWindow`:
- `PopupEditorPage`:
- `NoteAgentControl`: Control para interactuar con la nota a través de los agentes.
- `AgentsCollectionViewModel`: Gestión de agentes.
- `IChatService`: Interfaz para la comunicación con los servicios de IA.
    

#### Secuencia simplificada

   
(ESPACIO PARA SECUENCIAS)